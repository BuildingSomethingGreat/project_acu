---
import Header from "../../components/header.astro"
import Loader from "../../components/loader.astro";
import "./../app.css"
export function getStaticPaths() {
  return [
    {params: {form: '1'}},
    {params: {form: '2'}},
    {params: {form: '3'}},
    {params: {form: '4'}}
  ];
}

var videos =  [
     {id:"1", views:"1", title: "Colors of Fall", creator: "Dr. Christopher Cobbler", thumbnail: "/vocatio_fall.png", url: "https://acu-cdn-pull.b-cdn.net/Colors%20of%20Fall.mp4", link: Astro.url.origin + "/podcasts/1"},
     {id:"2", views:"1", title: "Child of the Creator", creator: "Dr. Jerry Taylor", thumbnail: "/vocatio_teddy.png", url: "https://acu-cdn-pull.b-cdn.net/childOfTheCreator_formation.mp4"},
     {id:"3", views:"1", title: "Rest", creator: "Dr. Christopher Cobbler", thumbnail: "/vocatio_rest.png", url: "https://acu-cdn-pull.b-cdn.net/Rest.m4v"},
     {id:"4", views:"1",  title: "The Slow Way", creator: "Dr. Christopher Cobbler", thumbnail: "/vocatio_slowway.png", url: "https://acu-cdn-pull.b-cdn.net/The%20Slow%20Way%20.m4v"}
]

const { form } = Astro.params;
const host = Astro.url.host;

var res = {}
for (var vid of videos) {
    if (form == vid.id) {
        res = vid;
    }
}
--- 


<head>
	<link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />

	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
</head>

<body class="h-screen  bg-[#313638] ">
	    <Loader />

        <div class="h-screen w-[95%] m-auto" id="">
		    <div class=" overflow-hidden  bg-[#313638]  flex flex-col items-center justify-center ">
		    

                <div class="grid grid-cols-4 auto-rows-auto  gap-4  overflow-hidden h-screen  p-3">
                    <div class="col-span-4 row-span-1 max-h-[100px] w-full relative p-3">
                        <!-- <img class=" z-10 bg-blend-multiply opacity-50 w-full h-auto left-0 bottom-0 blur " src="/overlay.png" alt="" /> -->
            
                        <div class=" z-20  top-10 right-0 left-0 m-auto w-[100%] flex items-center justify-between ">
                            <Header />
                        </div>
                    </div>

                    <div class="col-span-3  h-full p-3 overflow-y-scroll">
                        

                            <!-- <img id="controlplay" class="absolute w-20 h-20 z-50 bottom-3 right-3" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRM3pOh5Jpss90QbjOiLKG1HB-Qx3DZQsjoFA&s" alt="" /> -->
                        <div class="w-fit h-fit relative rounded-lg overflow-hidden shadow-lg" >
                            <svg id="play" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class=" absolute z-30 bottom-3 right-3  size-8">
                                <path fill-rule="evenodd" d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z" clip-rule="evenodd" />
                            </svg>
                            <svg id="pause" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" class="hidden z-30 absolute bottom-3 right-3 size-8">
                                <path fill-rule="evenodd" d="M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z" clip-rule="evenodd" />
                                </svg>
                                
                            <video id="vid" class=" opacity-75 m-auto  rounded-lg overflow-hidden object-fill max-w-[1000px]" width="100%" height="100%" playsinline>
                                <!-- <source src="/modernhome.mp4" type="video/mp4"> -->
                                <source src={res.url} type="video/mp4">
                            </video>
                        </div> 

                        <div class="grid grid-cols-2  z-30 mt-4 mb-3 text-white  ">
                            <div class="cols-span-1 flex flex-col items-start">
                                <p class="font-bold opacity-50 text-md">{res.creator}</p>
                                <h2 class=" my-2 raleway-thin text-xl">{res.title}</h2>
                            </div>
                           
                        
                            <div class="col-span-1 flex flex-row items-end justify-end">
                                <a id="exploreMore" class="col-span-1 my-3 flex items-center justify-center rounded-full w-[200px] h-[50px] bg-white text-black font-bold text-sm p-3">
                                    Explore more
                                </a>
                                <a id="exploreMore" class="col-span-1 mx-3  flex items-center justify-center my-3  rounded-full w-[100px] h-[50px] bg-blue-600 text-white font-bold text-sm p-3">
                                    Facebook
                                </a>
                                <a id="exploreMore" class="col-span-1    my-3 flex items-center justify-center rounded-full w-[50px] h-[50px] bg-black text-white font-bold text-sm p-3">
                                   X
                                </a>
                            </div>
                        </div>
            
                        
                    </div>
                    <script type="text/javascript">
                        function openNewWindow(el) {
                            window.open("./" + $(el).data("id"), "_blank");
                        }
                    </script>

                    <div class="col-span-1 h-full overflow-y-scroll  rounded-lg p-2">
                        <h3 class="font-bold mb-3 text-xl text-gray-400">
                            More on <span class="text-blue-500">Formation</span>
                        </h3>
                        {videos.map((vid) => (
                            <div onclick="openNewWindow(this)" data-id={vid.id} class="cursor-pointer mb-4 border border-gray-500 grid grid-rows-3 max-h-[300px]  transition-all ease-in-out text-white bg-transparent auto-rows-auto  overflow-hidden rounded-lg p-3">
                                <div class="row-span-2  rounded-lg overflow-hidden">
                                    <img class="   m-auto  object-fit rounded-lg" src={vid.thumbnail} alt="" />
                                </div>
                                <div class="row-span-1 mt-5">
                                    <div class="row-span-1">
                                        <h3 class="my-1 text-md text-left">{vid.title}</h3>
                                    </div>
                                    {/* <p class="font-bold  p-3 text-sm ">{vid.creator}</p> */}
                                    <div class="row-span-1  bottom-2 left-0 right-0 m-auto opacity-50 flex items-start justify-start text-white">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                                        </svg>
                                        <p class="mx-2 text-sm">
                                            {vid.views} Views
                                        </p>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
           
             
                 <!-- <img class="relative block h-auto w-full object-cover" src="/vocatio_fall.png" alt=""/> -->
            </div>
		</div>
    </div>

   
</body>


<script>
    (function() {

        var vid =document.getElementById("vid");

        function togglePlayPause() {
            if  (vid.paused) {
                vid.play();
                $("#play").addClass("hidden");
                $("#pause").removeClass("hidden");

            } else {
                vid.pause()
                $("#pause").addClass("hidden");
                $("#play").removeClass("hidden");
            };

        }

        togglePlayPause(); 
        
        $("#play, #pause").on("click", function() {
            togglePlayPause(); 
        });
       
    })();

</script>