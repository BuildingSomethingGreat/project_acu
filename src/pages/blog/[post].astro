---
import Header from "../../components/header.astro"
import Loader from "../../components/loader.astro";
import VideoSocialShare from "../../components/videosocialshare.astro"
import {SEO} from "astro-seo";


import "./../app.css"
import Divider from "../../components/divider.astro";
import Footer from "../../components/footer.astro";
import BlogText from "../../components/blogText";
import blogs from "./blogs.json";

export function getStaticPaths() {
  return [
    {params: {post: '1'}},
    {params: {post: '2'}}
  ];
}


const { post } = Astro.params;
const host = Astro.url.host;

var res = {}
for (var vid of blogs.posts) {
    if (post == vid.id) {
        res = vid;
    }
}

--- 

<head>
    <SEO
      title="Center for Vocational Formation : Blog"
      description="Diverse writings from theologians and CFVF's staff. "
      openGraph={{
        basic: {
          title: "Center for Vocational Formation : Blog",
          type: "Diverse writings from theologians and CFVF's staff.",
          image: "https://acu-cdn-pull.b-cdn.net/vocatiothumb.png",
        }
      }}
      twitter={{
        creator: "@jonasmerlins1"
      }}
      extend={{
        // extending the default link tags
        link: [{ rel: "icon", href: "/favicon.ico" }],
        // extending the default meta tags
        meta: [
          {
            name: "twitter:image",
            content: "https://acu-cdn-pull.b-cdn.net/vocatiothumb.png",
          },
          { name: "twitter:title", content: "Center for Vocational Formation : Vocatio Reimagined" },
          { name: "twitter:description", content: "Vocatio Reimagined is a podcasts that seeks to explore our vocational formation." },
        ],
      }}
    />
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />

	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
</head>

<body class="h-screen bg-[#191B1F] ">

	<Loader />
    <Header postion="relative"/>

    <div class="h-screen w-[95%] m-auto" id="">
        <div class="  overflow-hidden bg-[#191B1F]  flex flex-col items-center justify-center ">
            <div class="grid grid-cols-5 gap-4 m-auto h-screen">
                <div class="flex flex-col items-start justify-center mt-4 col-span-1 h-fit overflow-y-scroll rounded-lg bg-neutral-800 p-3">
                    <h3 class="p-2 font-bold mb-3 text-xl text-white">
                        Read more
                    </h3>

                    <ul class=" p-1 rounded-lg">
                        {blogs.posts.map((blog) => (
                            <a href={`/blog/`  + blog.id} >
                                <li class="mb-3 p-1 px-2 rounded-lg text-white flex items-center justify-start cursor-pointer hover:bg-neutral-500  ">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="text-green-500 size-4">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25" />
                                    </svg>
                                    
                                    <p class="ms-2 text-sm">{blog.title}</p>
                                </li>
                            </a>
                        ))}
                    </ul>
                </div>

                <div class="col-span-4 h-full p-2 m-auto text-white  bg-transparent  rounded-lg overflow-y-scroll ">
                        <!-- <img class="w-[80%] h-auto mb-4 rounded-lg " src="/vocatiothumb.png" alt=""/> -->
                        <video id="" class=" opacity-75 m-auto  rounded-lg overflow-hidden object-fill max-w-[1000px]" width="100%" height="100%"  muted autoplay loop playsinline>
                            <source src={res.url} type="video/mp4">
                        </video>
                        
                        <div class="mt-4 mx-auto grid grid-cols-2 ">
                            <div class="col-span-1 flex flex-col items-start justify-center">
                                <h1 class="mb-2 text-left text-white font-bold  text-xl">
                                    {res.title}
                                </h1>
                                <p class="font-bold opacity-50">{res.creator}</p>
                            </div>

                            <div class="col-span-1">
                                <VideoSocialShare />
                            </div>
                        </div>

                        <Divider />

                        <div class="m-auto flex items-center justify-start">
                            <BlogText rawHTML={res.blog} client:load />
                        </div>

                        <Divider />

                        <div class="mt-4 mx-auto  bg-white rounded-lg grid grid-cols-2 p-5">
                            <div class="text-black col-span-1 flex flex-col items-center justify-center">
                                <h3 class="text-4xl w-[80%] text-left m-auto font-bold">Here's another <span class="text-green-500">post</span> you may like.</h3>
                            </div>
                            <div class="text-black col-span-1 flex flex-col items-center justify-center">
                                <div onclick="window.location.href='/blog/2'" data-type="blog" data-id={vid.id} class="cursor-pointer inline-grid grid-cols-1 grid-rows-2 relative overflow-hidden min-w-[300px] max-w-[300px] h-full me-4 rounded-lg bg-white shadow-md">
                                    {/* <img class="row-span-1 relative z-10 top-0  w-full  object-cover opacity-100" src={vid.thumbnail} alt="" /> */}

                                    <div class="h-[400px] relative row-span-2 whitespace-normal z-30  left-0 bottom-0 p-5 grid grid-cols-1 grid-rows-3">
                                        <div class="row-span-1  flex flex-col text-black items-center justify-start">
                                            <h2 class="my-2 w-[100%] text-left font-bold  text-xl">{blogs.posts[1].title}</h2>
                                        </div>

                                        <div class="row-span-1  flex flex-col text-black items-start justify-start">
                                             <p class="opacity-80 text-sm text-left" >{blogs.posts[1].description.length > 200 ? blogs.posts[1].description.substring(0, 200) + "..." : blogs.posts[1].description}</p>
                                        </div>
                                        
                                        <div class="row-span-1 px-5 absolute bottom-2 left-0 right-0 m-auto opacity-50 flex items-start justify-start text-black">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z" />
                                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                                            </svg>
                                            <p class="mx-2 text-sm">
                                                {blogs.posts[1].views} Read
                                            </p>
                                        </div>
                                    </div>
                                </div>

                            </div> 
                        </div>
                </div>
            </div>
           
        </div>
    </div>

    <Footer />
</body>